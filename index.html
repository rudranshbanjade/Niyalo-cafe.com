<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Niyalo Cafe · Digital Menu</title>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;1,600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      background: #fcf3ec;
      background-image: radial-gradient(circle at 10% 20%, #fff3ea 0%, #faede5 100%);
      font-family: 'Plus Jakarta Sans', sans-serif;
      padding: 1.8rem;
      display: flex;
      justify-content: center;
    }
    .menu-container {
      max-width: 1300px;
      width: 100%;
    }
    .guest-header {
      background: #dac1b3;
      background: linear-gradient(145deg, #ddc5b8, #cfb2a2);
      border-radius: 100px 100px 30px 30px;
      padding: 1rem 2.2rem;
      margin-bottom: 2.2rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 5px solid #b18067;
      box-shadow: 0 15px 25px -10px rgba(79, 53, 41, 0.2);
    }
    .qr-badge {
      background: #765b4e;
      color: white;
      padding: 0.5rem 2rem;
      border-radius: 60px;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .live-badge {
      background: #2d5a4b;
      color: white;
      padding: 0.5rem 2rem;
      border-radius: 60px;
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 600;
    }
    .menu-card {
      background: white;
      border-radius: 48px;
      padding: 2.5rem;
      box-shadow: 0 30px 50px -20px rgba(45, 30, 24, 0.25);
      border: 1px solid #f0ddd2;
    }
    .hotel-header {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2.5rem;
      border-bottom: 3px dashed #dbb9a8;
      padding-bottom: 1.8rem;
    }
    .hotel-title {
      font-family: 'Playfair Display', serif;
      font-size: 2.8rem;
      font-weight: 700;
      color: #35271f;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .hotel-title i {
      color: #b18067;
    }
    .hotel-info {
      background: #fff9f2;
      padding: 0.8rem 1.8rem;
      border-radius: 60px;
      display: flex;
      flex-wrap: wrap;
      gap: 1.8rem;
    }
    .category-card {
      background: #fffcf7;
      border-radius: 36px;
      padding: 1.8rem;
      margin-bottom: 2rem;
      border: 1px solid #f0ddd2;
    }
    .category-title {
      display: flex;
      align-items: center;
      gap: 12px;
      border-bottom: 2px dotted #eacec2;
      padding-bottom: 1rem;
      margin-bottom: 1.2rem;
    }
    .category-title i {
      font-size: 2rem;
      color: #aa7862;
    }
    .category-title h2 {
      font-family: 'Playfair Display', serif;
      font-size: 1.8rem;
      font-weight: 600;
      color: #3d2c24;
    }
    .menu-item {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      padding: 0.7rem 0;
      border-bottom: 1px dashed #efd9cf;
    }
    .item-name {
      font-weight: 700;
      font-size: 1.2rem;
      color: #2c1e19;
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }
    .item-desc {
      font-size: 0.85rem;
      color: #6b5246;
      margin-top: 2px;
    }
    .price {
      font-weight: 800;
      font-size: 1.3rem;
      background: #ffefe7;
      padding: 0.2rem 1.2rem;
      border-radius: 60px;
      color: #5c3d33;
    }
    .price:before {
      content: "रू";
      margin-right: 3px;
    }
    .badge {
      background: #e7d2c5;
      border-radius: 60px;
      padding: 0.2rem 1rem;
      font-size: 0.65rem;
      font-weight: 700;
      text-transform: uppercase;
      color: #4d352c;
      margin-left: 6px;
    }
    .footer-section {
      background: #fdf3ed;
      border-radius: 60px;
      padding: 1.8rem;
      margin-top: 2rem;
      text-align: center;
    }
    .footer-badges {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 1.5rem;
      margin-bottom: 1rem;
    }
    .footer-badge {
      background: #e7d2c5;
      border-radius: 60px;
      padding: 0.3rem 1.2rem;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }
    .pulse-dot {
      width: 10px;
      height: 10px;
      background: #b3f0d0;
      border-radius: 50%;
      animation: pulse 1.5s infinite;
    }
    @keyframes pulse {
      0% { opacity: 0.6; transform: scale(1); }
      100% { opacity: 1; transform: scale(1.2); }
    }
  </style>
</head>
<body>
  <div class="menu-container">
    <!-- HEADER -->
    <div class="guest-header">
      <span class="qr-badge">
        <i class="fas fa-qrcode"></i> NIYALO CAFE
      </span>
      <span class="live-badge">
        <span class="pulse-dot"></span>
        <i class="fas fa-bolt"></i> FRESH · LOCAL
      </span>
    </div>

    <!-- MENU CONTENT -->
    <div class="menu-card" id="menuContent"></div>
    
    <div style="text-align: center; margin-top: 1.5rem; color: #8b6f63;">
      <i class="fas fa-leaf"></i> handmade with love · पोखरा
    </div>
  </div>

  <script>
    // ===========================================
    // NIYALO · DEFAULT MENU (ALWAYS SHOWS)
    // NO EMPTY PAGE EVER!
    // ===========================================
    
    const DEFAULT_MENU = {
      hotel: {
        name: "Niyalo Cafe",
        location: "Lakeside, Pokhara",
        tagline: "homemade · local love",
        hours: "7:00 – 22:00 daily",
        phone: "+977 981-234567",
        address: "Lakeside Rd, Pokhara",
        heartNote: "order at counter · everything made to share"
      },
      footer: [
        "house-baked daily",
        "vegan & gluten-free",
        "free high-speed wifi"
      ],
      categories: [
        {
          title: "all-day breakfast",
          icon: "sunrise",
          items: [
            { name: "Niyalo Shakshuka", desc: "poached eggs · spiced tomato · feta", price: "590", badge: null },
            { name: "Cardamom French Toast", desc: "brioche · orange · maple", price: "520", badge: null },
            { name: "Avocado Garden Toast", desc: "sourdough · za'atar · radish", price: "580", badge: "vegan" },
            { name: "House Granola Pot", desc: "yoghurt · berries · honey", price: "420", badge: null }
          ]
        },
        {
          title: "small plates",
          icon: "utensils",
          items: [
            { name: "Burnt Eggplant Dip", desc: "smoked paprika · flatbread", price: "450", badge: null },
            { name: "Chili Garlic Prawns", desc: "lemon · parsley · sourdough", price: "690", badge: null },
            { name: "Wild Mushroom Toast", desc: "thyme · truffle oil · pecorino", price: "620", badge: "signature" },
            { name: "Harissa Cauliflower", desc: "tahini · pomegranate · almonds", price: "510", badge: null }
          ]
        },
        {
          title: "bowls & greens",
          icon: "leaf",
          items: [
            { name: "Niyalo Harvest Bowl", desc: "quinoa · sweet potato · kale · miso", price: "650", badge: null },
            { name: "Sesame Salmon", desc: "soba · edamame · pickled ginger", price: "820", badge: null },
            { name: "Turmeric Coconut Lentils", desc: "brown rice · crispy shallots", price: "550", badge: "vegan" }
          ]
        },
        {
          title: "slow sips",
          icon: "mug-saucer",
          items: [
            { name: "House Espresso Blend", desc: "single origin · honey process", price: "210", badge: null },
            { name: "Cardamom Rose Latte", desc: "oat milk · dried rose petals", price: "290", badge: "best seller" },
            { name: "Iced Turmeric Tonic", desc: "ginger · lemon · agave", price: "250", badge: null },
            { name: "Salted Honey Affogato", desc: "gelato · espresso · maldon", price: "360", badge: null }
          ]
        },
        {
          title: "sweet corner",
          icon: "cake",
          items: [
            { name: "Miso Chocolate Chip Cookie", desc: "brown butter · sea salt", price: "180", badge: null },
            { name: "Pistachio & Orange Cake", desc: "labneh frosting · rose", price: "320", badge: null },
            { name: "Vegan Berry Crumble", desc: "oat topping · coconut cream", price: "340", badge: null },
            { name: "Chai-Spiced Bun", desc: "cream cheese drizzle", price: "220", badge: null }
          ]
        },
        {
          title: "cold + curated",
          icon: "wine-bottle",
          items: [
            { name: "Kombucha (rotating)", desc: "ginger · lemongrass · local", price: "250", badge: null },
            { name: "Orange & Carrot", desc: "cold pressed · turmeric", price: "290", badge: null },
            { name: "Michelada", desc: "lime · tajin · agave", price: "390", badge: null },
            { name: "Hibiscus Spritz", desc: "sparkling · mint · lime", price: "350", badge: null }
          ]
        }
      ]
    };

    // ===========================================
    // RENDER MENU FUNCTION
    // ===========================================
    function renderMenu(menuData) {
      const container = document.getElementById('menuContent');
      
      let html = `
        <!-- HOTEL HEADER -->
        <div style="display: flex; flex-wrap: wrap; justify-content: space-between; align-items: center; margin-bottom: 2.5rem; border-bottom: 3px dashed #dbb9a8; padding-bottom: 1.8rem;">
          <div>
            <div style="font-family: 'Playfair Display', serif; font-size: 2.8rem; font-weight: 700; color: #35271f; display: flex; align-items: center; gap: 12px; margin-bottom: 0.3rem;">
              <i class="fas fa-leaf" style="color: #b18067;"></i>
              <span>${menuData.hotel.name}</span>
              <i class="fas fa-mug-hot" style="color: #b18067;"></i>
            </div>
            <div style="display: flex; align-items: center; gap: 12px; color: #5f4a3d; font-size: 1rem; margin-left: 0.5rem;">
              <i class="fas fa-map-pin"></i>
              <span>${menuData.hotel.location}</span>
              <span style="margin:0 6px;">•</span>
              <i class="fas fa-seedling"></i>
              <span>${menuData.hotel.tagline}</span>
            </div>
          </div>
          <div style="background: #fff9f2; padding: 0.8rem 1.8rem; border-radius: 60px; display: flex; flex-wrap: wrap; gap: 1.8rem;">
            <span style="display: flex; align-items: center; gap: 8px;"><i class="fas fa-clock" style="color: #b18067;"></i> ${menuData.hotel.hours}</span>
            <span style="display: flex; align-items: center; gap: 8px;"><i class="fas fa-phone-alt" style="color: #b18067;"></i> ${menuData.hotel.phone}</span>
            <span style="display: flex; align-items: center; gap: 8px;"><i class="fas fa-location-dot" style="color: #b18067;"></i> ${menuData.hotel.address}</span>
          </div>
        </div>
      `;

      // CATEGORIES
      menuData.categories.forEach(cat => {
        html += `<div style="background: white; border-radius: 36px; padding: 1.8rem; margin-bottom: 2rem; border: 1px solid #f0ddd2;">`;
        html += `<div style="display: flex; align-items: center; gap: 12px; border-bottom: 2px dotted #eacec2; padding-bottom: 1rem; margin-bottom: 1.2rem;">`;
        html += `<i class="fas fa-${cat.icon}" style="font-size: 2rem; color: #aa7862;"></i>`;
        html += `<h2 style="font-family: 'Playfair Display', serif; font-size: 1.8rem; font-weight: 600; color: #3d2c24;">${cat.title}</h2>`;
        html += `</div>`;

        cat.items.forEach(item => {
          html += `<div style="display: flex; justify-content: space-between; align-items: baseline; padding: 0.7rem 0; border-bottom: 1px dashed #efd9cf;">`;
          html += `<div style="flex: 1;">`;
          html += `<div style="display: flex; align-items: center; gap: 8px; flex-wrap: wrap;">`;
          html += `<span style="font-weight: 700; font-size: 1.2rem; color: #2c1e19;">${item.name}</span>`;
          if (item.badge) {
            html += `<span style="background: #e7d2c5; border-radius: 60px; padding: 0.2rem 1rem; font-size: 0.65rem; font-weight: 700; text-transform: uppercase; color: #4d352c;">${item.badge}</span>`;
          }
          html += `</div>`;
          html += `<div style="font-size: 0.85rem; color: #6b5246; margin-top: 2px;">${item.desc}</div>`;
          html += `</div>`;
          html += `<span style="font-weight: 800; font-size: 1.3rem; background: #ffefe7; padding: 0.2rem 1.2rem; border-radius: 60px; color: #5c3d33;">रू${item.price}</span>`;
          html += `</div>`;
        });
        html += `</div>`;
      });

      // FOOTER
      html += `<div style="background: #fdf3ed; border-radius: 60px; padding: 1.8rem; margin-top: 2rem; text-align: center;">`;
      html += `<div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 1.5rem; margin-bottom: 1rem;">`;
      
      menuData.footer.forEach(text => {
        html += `<span style="background: #e7d2c5; border-radius: 60px; padding: 0.3rem 1.2rem; display: inline-flex; align-items: center; gap: 8px;">`;
        html += `<i class="fas fa-heart" style="color: #a5664a;"></i> ${text}`;
        html += `</span>`;
      });

      html += `</div>`;
      html += `<div style="margin-top: 0.8rem;">`;
      html += `<i class="fas fa-heart" style="color: #c2714b; margin: 0 6px;"></i>`;
      html += ` ${menuData.hotel.heartNote} `;
      html += `<i class="fas fa-heart" style="color: #c2714b; margin: 0 6px;"></i>`;
      html += `</div>`;
      html += `</div>`;

      container.innerHTML = html;
    }

    // ===========================================
    // LOAD MENU - FIRST DEFAULT, THEN SYNC
    // ===========================================
    
    // SHOW DEFAULT MENU IMMEDIATELY
    renderMenu(DEFAULT_MENU);
    
    // THEN TRY TO LOAD FROM OWNER
    function loadFromOwner() {
      const saved = localStorage.getItem('niyalo_live_menu');
      if (saved) {
        try {
          const ownerData = JSON.parse(saved);
          // Convert owner data format to match our render function
          const menuData = {
            hotel: ownerData.hotel || DEFAULT_MENU.hotel,
            footer: ownerData.footer ? ownerData.footer.map(f => f.text) : DEFAULT_MENU.footer,
            categories: ownerData.categories || DEFAULT_MENU.categories
          };
          renderMenu(menuData);
        } catch(e) {
          console.log('Using default menu');
        }
      }
    }

    // Listen for owner updates
    window.addEventListener('storage', (e) => {
      if (e.key === 'niyalo_live_menu') {
        loadFromOwner();
      }
    });

    // Check every second
    setInterval(loadFromOwner, 1000);
    
    // Also try to load immediately
    setTimeout(loadFromOwner, 500);
  </script>
</body>
</html>