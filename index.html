<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Niyalo Cafe Â· Digital Menu</title>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;1,600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <style>
    /* YOUR EXISTING GUEST STYLES */
    *{margin:0;padding:0;box-sizing:border-box;}
    body{background:#fcf3ec;font-family:'Plus Jakarta Sans',sans-serif;padding:1rem;display:flex;justify-content:center;}
    .container{max-width:1300px;width:100%;}
    .header{background:#dac1b3;border-radius:40px 40px 20px 20px;padding:0.8rem 1.2rem;margin-bottom:1.2rem;display:flex;justify-content:space-between;align-items:center;border-bottom:4px solid #b18067;}
    .qr-badge{background:#765b4e;color:white;padding:0.4rem 1.2rem;border-radius:40px;}
    .live-badge{background:#2d5a4b;color:white;padding:0.4rem 1.2rem;border-radius:40px;display:flex;align-items:center;gap:6px;}
    .menu-card{background:white;border-radius:36px;padding:1.5rem;}
    .hotel-name{font-family:'Playfair Display',serif;font-size:2rem;display:flex;align-items:center;gap:8px;}
    .contact-info{background:#fff9f2;padding:0.6rem 1.2rem;border-radius:50px;display:flex;flex-wrap:wrap;gap:1rem;}
    .category{background:#fffcf7;border-radius:28px;padding:1.2rem;margin-bottom:1.2rem;}
    .category-title{display:flex;align-items:center;gap:8px;border-bottom:2px dotted #eacec2;padding-bottom:0.8rem;margin-bottom:0.8rem;}
    .item{display:flex;justify-content:space-between;padding:0.6rem 0;border-bottom:1px dashed #efd9cf;}
    .price{font-weight:800;background:#ffefe7;padding:0.15rem 1rem;border-radius:40px;}
    .price:before{content:"à¤°à¥‚";margin-right:3px;}
    .badge{background:#e7d2c5;border-radius:40px;padding:0.15rem 0.8rem;font-size:0.55rem;}
    .footer{background:#fdf3ed;border-radius:40px;padding:1.2rem;margin-top:1.5rem;text-align:center;}
    .footer-badges{display:flex;flex-wrap:wrap;justify-content:center;gap:0.7rem;margin-bottom:0.8rem;}
    .pulse{width:8px;height:8px;background:#b3f0d0;border-radius:50%;animation:pulse 1.5s infinite;}
    @keyframes pulse{0%{opacity:0.6}100%{opacity:1;transform:scale(1.2);}}
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <span class="qr-badge"><i class="fas fa-qrcode"></i> NIYALO CAFE</span>
      <span class="live-badge"><span class="pulse"></span> LIVE Â· CLOUD</span>
    </div>
    
    <div class="menu-card" id="menuContent">
      <div style="text-align:center;padding:2rem;">
        <i class="fas fa-spinner fa-spin"></i>
        <p>Loading from cloud...</p>
      </div>
    </div>
  </div>

  <script>
    // ðŸ”´ðŸ”´ðŸ”´ðŸ”´ðŸ”´ðŸ”´ðŸ”´ðŸ”´ðŸ”´ðŸ”´ðŸ”´ðŸ”´ðŸ”´ðŸ”´ðŸ”´ðŸ”´ðŸ”´ðŸ”´ðŸ”´ðŸ”´ðŸ”´
    // ðŸ”¥ðŸ”¥ðŸ”¥ PASTE THE SAME SUPABASE KEYS HERE! ðŸ”¥ðŸ”¥ðŸ”¥
    // ðŸ”´ðŸ”´ðŸ”´ðŸ”´ðŸ”´ðŸ”´ðŸ”´ðŸ”´ðŸ”´ðŸ”´ðŸ”´ðŸ”´ðŸ”´ðŸ”´ðŸ”´ðŸ”´ðŸ”´ðŸ”´ðŸ”´ðŸ”´ðŸ”´
    
    const SUPABASE_URL = 'https://your-project-url.supabase.co';  // <-- REPLACE THIS!
    const SUPABASE_KEY = 'your-anon-key-here';                   // <-- REPLACE THIS!
    
    // Initialize Supabase
    const { createClient } = supabase;
    const supabaseClient = createClient(SUPABASE_URL, SUPABASE_KEY);

    function renderMenu(data) {
      let html = `
        <div style="display:flex;flex-wrap:wrap;justify-content:space-between;margin-bottom:1.5rem;">
          <div>
            <div class="hotel-name">
              <i class="fas fa-leaf"></i> <span>${data.hotel.name}</span> <i class="fas fa-mug-hot"></i>
            </div>
            <div style="display:flex;gap:8px;color:#6b5548;">
              <i class="fas fa-map-pin"></i> ${data.hotel.location}
            </div>
          </div>
          <div class="contact-info">
            <div><i class="fas fa-clock"></i> ${data.hotel.hours}</div>
            <div><i class="fas fa-phone-alt"></i> ${data.hotel.phone}</div>
          </div>
        </div>
      `;
      
      data.categories.forEach(cat => {
        html += `<div class="category"><div class="category-title"><i class="fas fa-${cat.icon}"></i><h2>${cat.title}</h2></div>`;
        cat.items.forEach(item => {
          html += `<div class="item"><div><div class="item-name">${item.name}${item.badge ? `<span class="badge">${item.badge}</span>` : ''}</div><div class="item-desc">${item.desc}</div></div><span class="price">${item.price}</span></div>`;
        });
        html += `</div>`;
      });
      
      html += `<div class="footer"><div class="footer-badges">`;
      data.footer.forEach(text => {
        html += `<span class="footer-badge"><i class="fas fa-heart"></i> ${text}</span>`;
      });
      html += `</div><div><i class="fas fa-heart" style="color:#c2714b;"></i> ${data.hotel.heartNote} <i class="fas fa-heart" style="color:#c2714b;"></i></div></div>`;
      
      document.getElementById('menuContent').innerHTML = html;
    }

    async function loadFromSupabase() {
      try {
        const { data, error } = await supabaseClient
          .from('menus')
          .select('*')
          .eq('id', 1)
          .single();

        if (data) {
          renderMenu(data.data);
        } else {
          // Default menu
          renderMenu({
            hotel: {
              name: "Niyalo Cafe",
              location: "Lakeside, Pokhara",
              tagline: "homemade Â· local love",
              hours: "7:00â€“22:00 daily",
              phone: "+977 981-234567",
              heartNote: "order at counter Â· everything made to share"
            },
            footer: ["house-baked daily", "vegan & gluten-free", "free wifi"],
            categories: [{
              title: "all-day breakfast",
              icon: "sunrise",
              items: [{ name: "Niyalo Shakshuka", desc: "poached eggs Â· spiced tomato Â· feta", price: "590", badge: null }]
            }]
          });
        }
      } catch (error) {
        console.log('Error loading');
      }
    }

    // Load immediately and every 2 seconds
    loadFromSupabase();
    setInterval(loadFromSupabase, 2000);
  </script>
</body>
</html>
